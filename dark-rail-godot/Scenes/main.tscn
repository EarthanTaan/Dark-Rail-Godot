[gd_scene load_steps=24 format=3 uid="uid://cv5u1e8bvid36"]

[ext_resource type="Material" uid="uid://cwci62bjd4djm" path="res://Materials/ground_texture.tres" id="1_jjgbg"]
[ext_resource type="Script" uid="uid://bgsv5tx3tqh6d" path="res://Scenes/main.gd" id="1_kry3j"]
[ext_resource type="Resource" uid="uid://dqbpl4tijwajp" path="res://Resources/walk_mode.tres" id="2_21xkr"]
[ext_resource type="Script" uid="uid://casblof2kjhpc" path="res://Scenes/player.gd" id="2_bo1nx"]
[ext_resource type="PackedScene" uid="uid://clyhclfq6vqu2" path="res://Scenes/tree.tscn" id="2_jjvhh"]
[ext_resource type="Resource" uid="uid://bh5fuwlw10asj" path="res://Resources/move.tres" id="3_8gbba"]
[ext_resource type="Resource" uid="uid://3cpdyogyjj0n" path="res://Resources/shared_context.tres" id="3_344ge"]
[ext_resource type="Resource" uid="uid://cmq41f5f2aypi" path="res://Resources/pilot_mode.tres" id="4_ynf5e"]
[ext_resource type="Resource" uid="uid://1abw7cq1blrt" path="res://Resources/look.tres" id="7_6bp64"]
[ext_resource type="Material" uid="uid://dftm0vd77ggr3" path="res://Materials/ruins_material.tres" id="8_jkdf5"]
[ext_resource type="Resource" uid="uid://b36sro43erfey" path="res://Resources/mode_swap.tres" id="10_hptm8"]
[ext_resource type="Resource" uid="uid://yxua4hs6lcvp" path="res://Resources/train_throttle.tres" id="11_fdnlq"]
[ext_resource type="Resource" uid="uid://ddn2rxbx22pps" path="res://Resources/train_ebrake.tres" id="12_jkdf5"]
[ext_resource type="Resource" uid="uid://d2547rs4ddmf" path="res://Resources/train_switch_toggle.tres" id="13_wsu2k"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_jjgbg"]
sky_top_color = Color(0.63266, 0.694564, 0.807559, 1)
sky_horizon_color = Color(1.06851, 1.11035, 1.15801, 1)
ground_bottom_color = Color(0.24178, 0.34723, 0.424882, 1)
ground_horizon_color = Color(1.06851, 1.11035, 1.15801, 1)

[sub_resource type="Sky" id="Sky_bo1nx"]
sky_material = SubResource("ProceduralSkyMaterial_jjgbg")

[sub_resource type="Environment" id="Environment_8gbba"]
background_mode = 2
sky = SubResource("Sky_bo1nx")
tonemap_mode = 2

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_jjgbg"]

[sub_resource type="PlaneMesh" id="PlaneMesh_0xm2m"]
material = ExtResource("1_jjgbg")
size = Vector2(200, 200)

[sub_resource type="PrismMesh" id="PrismMesh_fdnlq"]
material = ExtResource("8_jkdf5")
left_to_right = 0.8
size = Vector3(20, 20, 20)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_bo1nx"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_8gbba"]

[sub_resource type="Curve3D" id="Curve3D_jkdf5"]
closed = true
_data = {
"points": PackedVector3Array(-8.80342, 0, 11.6205, 8.80342, 0, -11.6205, -4.22562, 0, -81.1674, -17.959, 0, -13.3812, 17.959, 0, 13.3812, 55.9897, 0, -82.5759, 0.352112, 0, -24.6495, -0.352112, 0, 24.6495, 61.2717, 0, -33.9811, 0, 0, -28.8752, 0, 0, 28.8752, 84.8648, 0, 15.6701, 15.1419, 0, -14.4376, -15.1419, 0, 14.4376, 50.3555, 0, 51.2358, 11.9726, 0, -3.16924, -11.9726, 0, 3.16924, 19.7196, 0, 84.3366, 15.494, 0, 8.09914, -15.494, 0, -8.09914, -42.9606, 0, 84.6888, 9.50768, 0, 15.494, -9.50768, 0, -15.494, -52.4683, 0, 43.1367, 6.33846, 0, 25.7059, -6.33846, 0, -25.7059, -83.1042, 0, 3.69743, -12.3248, 0, 10.5641, 12.3248, 0, -10.5641, -77.8221, 0, -47.7145, -19.3675, 0, 10.9162, 19.3675, 0, -10.9162, -27.1145, 0, -52.2922),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 11

[node name="Main" type="Node3D"]
script = ExtResource("1_kry3j")
walk_mode = ExtResource("2_21xkr")
shared_context = ExtResource("3_344ge")
pilot_mode = ExtResource("4_ynf5e")
mode_swap = ExtResource("10_hptm8")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_8gbba")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.95424, -0.055009, 0.293938, 0, 0.982935, 0.183951, -0.299041, 0.175534, -0.937957, 0, 0, 0)
shadow_enabled = true
directional_shadow_max_distance = 10.0

[node name="Ground" type="StaticBody3D" parent="."]

[node name="ground_collider" type="CollisionShape3D" parent="Ground"]
visible = false
shape = SubResource("WorldBoundaryShape3D_jjgbg")

[node name="ground_mesh" type="MeshInstance3D" parent="Ground"]
mesh = SubResource("PlaneMesh_0xm2m")
skeleton = NodePath("../..")

[node name="forest" type="Node3D" parent="Ground"]

[node name="trees" type="Node3D" parent="Ground/forest"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.51004, 0)

[node name="tree1" parent="Ground/forest/trees" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 4.1849, 6.90363, 13.8072)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree2" parent="Ground/forest/trees" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, -15.6664, 6.98711, -2.85514)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree3" parent="Ground/forest/trees" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 5.143, 6.955, -17.001)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="trees2" type="Node3D" parent="Ground/forest"]
transform = Transform3D(0.413359, 0, -0.910568, 0, 1, 0, 0.910568, 0, 0.413359, -59.1589, 1.51004, -23.9453)

[node name="tree1" parent="Ground/forest/trees2" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 4.1849, 6.90363, 13.8072)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree2" parent="Ground/forest/trees2" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, -15.6664, 6.98711, -2.85514)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree3" parent="Ground/forest/trees2" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 5.143, 6.955, -17.001)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="trees3" type="Node3D" parent="Ground/forest"]
transform = Transform3D(-0.874044, 0, -0.485847, 0, 1, 0, 0.485847, 0, -0.874044, 28.8752, 1.51004, -59.1589)

[node name="tree1" parent="Ground/forest/trees3" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 4.1849, 6.90363, 13.8072)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree2" parent="Ground/forest/trees3" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, -15.6664, 6.98711, -2.85514)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree3" parent="Ground/forest/trees3" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 5.143, 6.955, -17.001)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="trees4" type="Node3D" parent="Ground/forest"]
transform = Transform3D(0.599834, 0, 0.800125, 0, 1, 0, -0.800125, 0, 0.599834, 13.029, 1.51004, -60.9196)

[node name="tree1" parent="Ground/forest/trees4" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 4.1849, 6.90363, 13.8072)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree2" parent="Ground/forest/trees4" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, -15.6664, 6.98711, -2.85514)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree3" parent="Ground/forest/trees4" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 5.143, 6.955, -17.001)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="trees5" type="Node3D" parent="Ground/forest"]
transform = Transform3D(-0.547563, 0, 0.836764, 0, 1, 0, -0.836764, 0, -0.547563, 57.7503, 1.51004, 7.747)

[node name="tree1" parent="Ground/forest/trees5" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 4.1849, 6.90363, 13.8072)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree2" parent="Ground/forest/trees5" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, -15.6664, 6.98711, -2.85514)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree3" parent="Ground/forest/trees5" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 5.143, 6.955, -17.001)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="trees6" type="Node3D" parent="Ground/forest"]
transform = Transform3D(0.0291255, 0, 0.999576, 0, 1, 0, -0.999576, 0, 0.0291255, 4.57774, 1.51004, 57.0461)

[node name="tree1" parent="Ground/forest/trees6" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 4.1849, 6.90363, 13.8072)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree2" parent="Ground/forest/trees6" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, -15.6664, 6.98711, -2.85514)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="tree3" parent="Ground/forest/trees6" instance=ExtResource("2_jjvhh")]
transform = Transform3D(1, 0, 0, 0, 1.17831, 0, 0, 0, 1, 5.143, 6.955, -17.001)
skeleton = NodePath("../../root/@EditorNode@21272/@Panel@14/@VBoxContainer@15/DockHSplitLeftL/DockHSplitLeftR/DockHSplitMain/@VBoxContainer@26/DockVSplitCenter/@VSplitContainer@54/@VBoxContainer@55/@EditorMainScreen@102/MainScreen/@CanvasItemEditor@11482/@VSplitContainer@11134/@HSplitContainer@11136/@HSplitContainer@11138/@Control@11139/@SubViewportContainer@11140/@SubViewport@11141/Main/Ground")

[node name="ruins_tilted" type="MeshInstance3D" parent="Ground"]
transform = Transform3D(0.629966, 0, -0.327726, 0, 0.4175, 0, 0.703441, 0, 0.293495, -47.3612, 4.03543, 21.1348)
mesh = SubResource("PrismMesh_fdnlq")

[node name="Player" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.398449, 1.10303, 0.645611)
script = ExtResource("2_bo1nx")
pilot_mode = ExtResource("4_ynf5e")
move = ExtResource("3_8gbba")
look = ExtResource("7_6bp64")
train_throttle = ExtResource("11_fdnlq")
train_ebrake = ExtResource("12_jkdf5")
train_switch_toggle = ExtResource("13_wsu2k")

[node name="player_collider" type="CollisionShape3D" parent="Player"]
shape = SubResource("CapsuleShape3D_bo1nx")

[node name="player_mesh" type="MeshInstance3D" parent="Player"]
mesh = SubResource("CapsuleMesh_8gbba")

[node name="player_camera" type="Camera3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.584973, 0)

[node name="Path3D" type="Path3D" parent="."]
curve = SubResource("Curve3D_jkdf5")
